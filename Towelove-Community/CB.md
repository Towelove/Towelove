详细设计步骤
1. 用户访问系统并生成对应的行为数据
   用户在浏览、点赞、评论等行为时，系统会生成相应的行为数据。
   行为数据可以包括用户ID、文章ID、行为类型（如view、like、comment）、时间戳等。
2. 行为数据存储到数据库
   将生成的行为数据存储到user_actions表中，确保数据的完整性和可追溯性。
3. 定时任务计算数据库中的用户行为数据并存储到用户偏好表
   定期（例如每小时或每天）从user_actions表中提取数据，计算用户的偏好，并存储到user_preferences表中。
   计算用户偏好的方法可以使用加权移动平均等技术，将新行为数据与现有偏好合并。
4. 在线用户需要实时使用偏好数据进行推荐内容计算，因此将在线用户的偏好数据缓存到Redis缓存中
   当用户上线时，从user_preferences表中读取用户的偏好数据，并缓存到Redis中，以便快速访问。
5. 用户的在线行为存储到缓存中
   将用户的在线行为（如实时浏览、点赞等）直接存储到Redis中，这样可以避免频繁访问数据库。
6. 定时任务在线计算缓存中的偏好数据，从而使得用户在线时候的内容推荐变更的更加实时
   定期（例如每分钟）从Redis中提取用户的在线行为数据，计算实时的用户偏好，并更新Redis中的偏好数据。
   这种方法确保用户在在线期间获得最新的推荐内容。
7. 更新缓存中的用户偏好
   在用户在线期间，持续更新Redis中的用户偏好数据，保证推荐系统使用最新的偏好信息。
8. 用户下线后，刷新缓存数据到数据库，并进行重新的加权计算，得到新的用户偏好
   用户下线时，将Redis中的偏好数据刷新到user_preferences表中。
   重新计算用户偏好，结合在线期间的行为数据和数据库中的历史数据，更新用户偏好。
   后续优化思路
   相似行为推荐：通过分析用户之间的相似行为，推荐相似用户喜欢的内容，防止用户只看到一种类型的内容。
   个性化推荐策略：根据用户的偏好变化，动态调整推荐策略，提升推荐的多样性和个性化。